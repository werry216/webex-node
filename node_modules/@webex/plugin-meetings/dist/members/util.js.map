{"version":3,"sources":["util.js"],"names":["MembersUtil","generateAddMemberOptions","invitee","locusUrl","alertIfActive","generateAdmitMemberOptions","memberIds","getAddMemberBody","options","invitees","address","emailAddress","email","getAdmitMemberRequestBody","admit","participantIds","getAdmitMemberRequestParams","format","body","uri","CONTROLS","method","HTTP_VERBS","PUT","getAddMemberRequestParams","requestParams","isInvalidInvitee","VALID_EMAIL_ADDRESS","test","getRemoveMemberRequestParams","reason","PARTICIPANT","memberId","LEAVE","generateTransferHostMemberOptions","transfer","moderator","generateRemoveMemberOptions","removal","_FORCED_","generateMuteMemberOptions","mute","status","muted","getMuteMemberRequestParams","audio","PATCH","getTransferHostToMemberRequestParams","role"],"mappings":"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","sourcesContent":["import {\n  HTTP_VERBS,\n  CONTROLS,\n  _FORCED_,\n  LEAVE,\n  PARTICIPANT,\n  VALID_EMAIL_ADDRESS\n} from '../constants';\n\nconst MembersUtil = {};\n\n/**\n * @param {Object} invitee with emailAddress or email\n * @param {String} locusUrl\n * @param {Boolean} alertIfActive\n * @returns {Object} the format object\n */\nMembersUtil.generateAddMemberOptions = (invitee, locusUrl, alertIfActive) => ({\n  invitee,\n  locusUrl,\n  alertIfActive\n});\n\n/**\n * @param {Array} memberIds\n * @param {String} locusUrl\n * @returns {Object} the format object\n */\nMembersUtil.generateAdmitMemberOptions = (memberIds, locusUrl) => ({\n  locusUrl,\n  memberIds\n});\n\n/**\n * @param {Object} options with {invitee: {emailAddress, email}, alertIfActive}\n * @returns {Object} with {invitees: [{address}], alertIfActive}\n */\nMembersUtil.getAddMemberBody = (options) => ({\n  invitees: [\n    {\n      address: options.invitee.emailAddress || options.invitee.email\n    }\n  ],\n  alertIfActive: options.alertIfActive\n});\n\n/**\n * @param {Object} options with {memberIds}\n * @returns {Object} admit with {memberIds}\n */\nMembersUtil.getAdmitMemberRequestBody = (options) => ({\n  admit: {participantIds: options.memberIds}\n});\n\n/**\n * @param {Object} format with {memberIds, locusUrl}\n * @returns {Object} the request parameters (method, uri, body) needed to make a admitMember request\n */\nMembersUtil.getAdmitMemberRequestParams = (format) => {\n  const body = MembersUtil.getAdmitMemberRequestBody(format);\n  const uri = `${format.locusUrl}/${CONTROLS}`;\n\n  return {\n    method: HTTP_VERBS.PUT,\n    uri,\n    body\n  };\n};\n\n/**\n * @param {Object} format with {invitee {emailAddress, email}, locusUrl, alertIfActive}\n * @returns {Object} the request parameters (method, uri, body) needed to make a addMember request\n */\nMembersUtil.getAddMemberRequestParams = (format) => {\n  const body = MembersUtil.getAddMemberBody(format);\n  const requestParams = {\n    method: HTTP_VERBS.PUT,\n    uri: format.locusUrl,\n    body\n  };\n\n  return requestParams;\n};\n\nMembersUtil.isInvalidInvitee = (invitee) => {\n  if (!(invitee && (invitee.email || invitee.emailAddress))) {\n    return true;\n  }\n\n  return !VALID_EMAIL_ADDRESS.test(invitee.email || invitee.emailAddress);\n};\n\nMembersUtil.getRemoveMemberRequestParams = (options) => {\n  const body = {\n    reason: options.reason\n  };\n  const uri = `${options.locusUrl}/${PARTICIPANT}/${options.memberId}/${LEAVE}`;\n\n  return {\n    method: HTTP_VERBS.PUT,\n    uri,\n    body\n  };\n};\n\nMembersUtil.generateTransferHostMemberOptions = (transfer, moderator, locusUrl) => ({\n  moderator,\n  locusUrl,\n  memberId: transfer\n});\n\nMembersUtil.generateRemoveMemberOptions = (removal, locusUrl) => ({\n  reason: _FORCED_,\n  memberId: removal,\n  locusUrl\n});\n\nMembersUtil.generateMuteMemberOptions = (mute, status, locusUrl) => ({\n  memberId: mute,\n  muted: status,\n  locusUrl\n});\n\nMembersUtil.getMuteMemberRequestParams = (options) => {\n  const body = {\n    audio: {\n      muted: options.muted\n    }\n  };\n  const uri = `${options.locusUrl}/${PARTICIPANT}/${options.memberId}/${CONTROLS}`;\n\n  return {\n    method: HTTP_VERBS.PATCH,\n    uri,\n    body\n  };\n};\n\nMembersUtil.getTransferHostToMemberRequestParams = (options) => {\n  const body = {\n    role: {\n      moderator: options.moderator\n    }\n  };\n  const uri = `${options.locusUrl}/${PARTICIPANT}/${options.memberId}/${CONTROLS}`;\n\n  return {\n    method: HTTP_VERBS.PATCH,\n    uri,\n    body\n  };\n};\n\nexport default MembersUtil;\n"]}