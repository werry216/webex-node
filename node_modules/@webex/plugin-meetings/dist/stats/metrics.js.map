{"version":3,"sources":["metrics.js"],"names":["MediaMetrics","options","MEETINGS","config","stats","mqa","metrics","autoSendMQA","useConfig","senders","id","STATS","AUDIO_SENDER_ID","correlate","AUDIO_CORRELATE","onData","VIDEO_SENDER_ID","VIDEO_CORRELATE","SHARE_SENDER_ID","SHARE_CORRELATE","receivers","AUDIO_RECEIVER_ID","VIDEO_RECEIVER_ID","SHARE_RECEIVER_ID"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;IACqBA,Y;AAGnB;AACF;AACA;AACA;AACA;AACA;AACE,0BAA0B;AAAA,QAAdC,OAAc,uEAAJ,EAAI;AAAA;AAAA,qDARdC,mBAQc;AACxB,SAAKC,MAAL,GAAcF,OAAO,CAACE,MAAtB;AACA,SAAKC,KAAL,GAAa,IAAb;AACD;AAED;AACF;AACA;AACA;AACA;;;;;WACE,kBAASA,KAAT,EAAgB;AACd,WAAKA,KAAL,GAAaA,KAAb;AACD;AAED;AACF;AACA;AACA;AACA;AACA;;;;WACE,sBAAa;AACX,UAAMC,GAAG,GAAG,KAAKF,MAAL,CAAYG,OAAZ,CAAoBC,WAAhC;AAEA,aAAO;AACLC,QAAAA,SAAS,EAAE,IADN;AAELC,QAAAA,OAAO,EAAE,CACP;AACEC,UAAAA,EAAE,EAAEC,iBAAMC,eADZ;AAEEC,UAAAA,SAAS,EAAEF,iBAAMG,eAFnB;AAGET,UAAAA,GAAG,EAAHA,GAHF;AAIEU,UAAAA,MAAM,EAAE,kBAAM,CAAE;AAJlB,SADO,EAOP;AACEL,UAAAA,EAAE,EAAEC,iBAAMK,eADZ;AAEEH,UAAAA,SAAS,EAAEF,iBAAMM,eAFnB;AAGEZ,UAAAA,GAAG,EAAHA,GAHF;AAIEU,UAAAA,MAAM,EAAE,kBAAM,CAAE;AAJlB,SAPO,EAaP;AACEL,UAAAA,EAAE,EAAEC,iBAAMO,eADZ;AAEEL,UAAAA,SAAS,EAAEF,iBAAMQ,eAFnB;AAGEd,UAAAA,GAAG,EAAHA,GAHF;AAIEU,UAAAA,MAAM,EAAE,kBAAM,CAAE;AAJlB,SAbO,CAFJ;AAsBLK,QAAAA,SAAS,EAAE,CACT;AACEV,UAAAA,EAAE,EAAEC,iBAAMU,iBADZ;AAEER,UAAAA,SAAS,EAAEF,iBAAMG,eAFnB;AAGET,UAAAA,GAAG,EAAHA,GAHF;AAIEU,UAAAA,MAAM,EAAE,kBAAM,CAAE;AAJlB,SADS,EAOT;AACEL,UAAAA,EAAE,EAAEC,iBAAMW,iBADZ;AAEET,UAAAA,SAAS,EAAEF,iBAAMM,eAFnB;AAGEZ,UAAAA,GAAG,EAAHA,GAHF;AAIEU,UAAAA,MAAM,EAAE,kBAAM,CAAE;AAJlB,SAPS,EAaT;AACEL,UAAAA,EAAE,EAAEC,iBAAMY,iBADZ;AAEEV,UAAAA,SAAS,EAAEF,iBAAMQ,eAFnB;AAGEd,UAAAA,GAAG,EAAHA,GAHF;AAIEU,UAAAA,MAAM,EAAE,kBAAM,CAAE;AAJlB,SAbS;AAtBN,OAAP;AA2CD","sourcesContent":["import {\n  MEETINGS,\n  STATS\n} from '../constants';\n\n/**\n  * Metrics Payload Event\n  * Emitted when a Metric Payload is available\n  * @event metrics:payload\n  * @instance\n  * @type {Object}\n  * @memberof MediaMetrics\n  */\n\n/**\n * @class MediaMetrics\n * @private\n */\nexport default class MediaMetrics {\n  namespace = MEETINGS;\n\n  /**\n   * @param {Object} options\n   * @param {Object} options.config\n   * @memberof MediaMetrics\n   * @constructor\n   */\n  constructor(options = {}) {\n    this.config = options.config;\n    this.stats = null;\n  }\n\n  /**\n   * @param {MeetingStats} stats\n   * @returns {undefined}\n   * @memberof MediaMetrics\n   */\n  setStats(stats) {\n    this.stats = stats;\n  }\n\n  /**\n   * sets up all the default senders and receivers getStats to collect data\n   * @returns {Object}\n   * @public\n   * @memberof MediaMetrics\n   */\n  initialize() {\n    const mqa = this.config.metrics.autoSendMQA;\n\n    return {\n      useConfig: true,\n      senders: [\n        {\n          id: STATS.AUDIO_SENDER_ID,\n          correlate: STATS.AUDIO_CORRELATE,\n          mqa,\n          onData: () => {}\n        },\n        {\n          id: STATS.VIDEO_SENDER_ID,\n          correlate: STATS.VIDEO_CORRELATE,\n          mqa,\n          onData: () => {}\n        },\n        {\n          id: STATS.SHARE_SENDER_ID,\n          correlate: STATS.SHARE_CORRELATE,\n          mqa,\n          onData: () => {}\n        }\n      ],\n      receivers: [\n        {\n          id: STATS.AUDIO_RECEIVER_ID,\n          correlate: STATS.AUDIO_CORRELATE,\n          mqa,\n          onData: () => {}\n        },\n        {\n          id: STATS.VIDEO_RECEIVER_ID,\n          correlate: STATS.VIDEO_CORRELATE,\n          mqa,\n          onData: () => {}\n        },\n        {\n          id: STATS.SHARE_RECEIVER_ID,\n          correlate: STATS.SHARE_CORRELATE,\n          mqa,\n          onData: () => {}\n        }\n      ]\n    };\n  }\n}\n"]}