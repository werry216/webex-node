{"version":3,"sources":["fullState.js"],"names":["FullState","parse","fullState","type","FULL_STATE","UNKNOWN","meetingState","state","locked","getFullState","oldFullState","newFullState","previous","current","updates","isMeetingEnded","isMeetingTerminating","meetingTypeChangedTo","isTypeChanged","meetingStateChangedTo","meetingStateChange","INACTIVE","ACTIVE","INITIALIZING","TERMINATING"],"mappings":";;;;;;;;;;AAAA;;AAEA,IAAMA,SAAS,GAAG,EAAlB;;AAEAA,SAAS,CAACC,KAAV,GAAkB,UAACC,SAAD;AAAA,SAAgB;AAChCC,IAAAA,IAAI,EAAED,SAAS,CAACC,IAAV,IAAkBC,sBAAWC,OADH;AAEhCC,IAAAA,YAAY,EAAEJ,SAAS,CAACK,KAFQ;AAGhCC,IAAAA,MAAM,EAAEN,SAAS,CAACM;AAHc,GAAhB;AAAA,CAAlB;;AAOAR,SAAS,CAACS,YAAV,GAAyB,UAACC,YAAD,EAAeC,YAAf,EAAgC;AACvD,MAAMC,QAAQ,GAAGF,YAAY,IAAIV,SAAS,CAACC,KAAV,CAAgBS,YAAhB,CAAjC;AACA,MAAMG,OAAO,GAAGF,YAAY,IAAIX,SAAS,CAACC,KAAV,CAAgBU,YAAhB,CAAhC;AAEA,SAAO;AACLC,IAAAA,QAAQ,EAARA,QADK;AAELC,IAAAA,OAAO,EAAPA,OAFK;AAGLC,IAAAA,OAAO,EAAE;AACPC,MAAAA,cAAc,EAAEf,SAAS,CAACe,cAAV,CAAyBH,QAAzB,EAAmCC,OAAnC,CADT;AAEPG,MAAAA,oBAAoB,EAAEhB,SAAS,CAACgB,oBAAV,CAA+BJ,QAA/B,EAAyCC,OAAzC,CAFf;AAGPI,MAAAA,oBAAoB,EAAEjB,SAAS,CAACkB,aAAV,CAAwBN,QAAxB,EAAkCC,OAAlC,CAHf;AAIPM,MAAAA,qBAAqB,EAAEnB,SAAS,CAACoB,kBAAV,CAA6BR,QAA7B,EAAuCC,OAAvC;AAJhB;AAHJ,GAAP;AAUD,CAdD;;AAgBAb,SAAS,CAACe,cAAV,GAA2B,UAACH,QAAD,EAAWC,OAAX,EAAuB;AAChD,MAAIA,OAAO,CAACN,KAAR,KAAkBH,sBAAWiB,QAA7B,IAAyCT,QAAzC,KACFA,QAAQ,CAACL,KAAT,KAAmBH,sBAAWkB,MAA9B,IACAV,QAAQ,CAACL,KAAT,KAAmBH,sBAAWmB,YAD9B,IAEAX,QAAQ,CAACL,KAAT,KAAmBH,sBAAWoB,WAH5B,CAAJ,EAG8C;AAC5C,WAAO,IAAP;AACD;;AAED,SAAO,KAAP;AACD,CATD;;AAWAxB,SAAS,CAACgB,oBAAV,GAAiC,UAACJ,QAAD,EAAWC,OAAX,EAAuB;AACtD,MAAIA,OAAO,CAACN,KAAR,KAAkBH,sBAAWoB,WAA7B,IAA4CZ,QAA5C,KACHA,QAAQ,CAACL,KAAT,KAAmBH,sBAAWkB,MAA9B,IACCV,QAAQ,CAACL,KAAT,KAAmBH,sBAAWmB,YAF5B,CAAJ,EAE+C;AAC7C,WAAO,IAAP;AACD;;AAED,SAAO,KAAP;AACD,CARD;;AAUAvB,SAAS,CAACkB,aAAV,GAA0B,UAACN,QAAD,EAAWC,OAAX,EAAuB;AAC/C,MAAI,CAACD,QAAD,IAAaC,OAAO,CAACV,IAAR,KAAiBS,QAAQ,CAACT,IAA3C,EAAiD;AAC/C,WAAOU,OAAO,IAAIA,OAAO,CAACV,IAA1B;AACD;;AAED,SAAO,IAAP;AACD,CAND;;AAQAH,SAAS,CAACoB,kBAAV,GAA+B,UAACR,QAAD,EAAWC,OAAX,EAAuB;AACpD,MAAI,CAACD,QAAD,IAAaC,OAAO,CAACP,YAAR,KAAyBM,QAAQ,CAACN,YAAnD,EAAiE;AAC/D,WAAOO,OAAO,IAAIA,OAAO,CAACP,YAA1B;AACD;;AAED,SAAO,IAAP;AACD,CAND;;eAQeN,S","sourcesContent":["import {FULL_STATE} from '../constants';\n\nconst FullState = {};\n\nFullState.parse = (fullState) => ({\n  type: fullState.type || FULL_STATE.UNKNOWN,\n  meetingState: fullState.state,\n  locked: fullState.locked\n});\n\n\nFullState.getFullState = (oldFullState, newFullState) => {\n  const previous = oldFullState && FullState.parse(oldFullState);\n  const current = newFullState && FullState.parse(newFullState);\n\n  return {\n    previous,\n    current,\n    updates: {\n      isMeetingEnded: FullState.isMeetingEnded(previous, current),\n      isMeetingTerminating: FullState.isMeetingTerminating(previous, current),\n      meetingTypeChangedTo: FullState.isTypeChanged(previous, current),\n      meetingStateChangedTo: FullState.meetingStateChange(previous, current)\n    }\n  };\n};\n\nFullState.isMeetingEnded = (previous, current) => {\n  if (current.state === FULL_STATE.INACTIVE && previous &&\n   (previous.state === FULL_STATE.ACTIVE ||\n    previous.state === FULL_STATE.INITIALIZING ||\n    previous.state === FULL_STATE.TERMINATING)) {\n    return true;\n  }\n\n  return false;\n};\n\nFullState.isMeetingTerminating = (previous, current) => {\n  if (current.state === FULL_STATE.TERMINATING && previous &&\n  (previous.state === FULL_STATE.ACTIVE ||\n    previous.state === FULL_STATE.INITIALIZING)) {\n    return true;\n  }\n\n  return false;\n};\n\nFullState.isTypeChanged = (previous, current) => {\n  if (!previous || current.type !== previous.type) {\n    return current && current.type;\n  }\n\n  return null;\n};\n\nFullState.meetingStateChange = (previous, current) => {\n  if (!previous || current.meetingState !== previous.meetingState) {\n    return current && current.meetingState;\n  }\n\n  return null;\n};\n\nexport default FullState;\n"]}