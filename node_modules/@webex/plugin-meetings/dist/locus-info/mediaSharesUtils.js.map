{"version":3,"sources":["mediaSharesUtils.js"],"names":["MediaSharesUtils","parse","mediaShares","contentId","getContentId","disposition","getDisposition","getMediaShares","oldShare","newShare","previous","current","contentFloor","extractContentFloor","extractContent","length","find","share","name","CONTENT","extractFloor","content","floor","beneficiary","id"],"mappings":";;;;;;;;;;AAAA;;AAEA,IAAMA,gBAAgB,GAAG,EAAzB;AAEA;AACA;AACA;AACA;AACA;;AACAA,gBAAgB,CAACC,KAAjB,GAAyB,UAACC,WAAD,EAAiB;AACxC,MAAIA,WAAJ,EAAiB;AACf,WAAO;AACLC,MAAAA,SAAS,EAAEH,gBAAgB,CAACI,YAAjB,CAA8BF,WAA9B,CADN;AAELG,MAAAA,WAAW,EAAEL,gBAAgB,CAACM,cAAjB,CAAgCJ,WAAhC;AAFR,KAAP;AAID;;AAED,SAAO,IAAP;AACD,CATD;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAF,gBAAgB,CAACO,cAAjB,GAAkC,UAACC,QAAD,EAAWC,QAAX,EAAwB;AACxD,MAAMC,QAAQ,GAAGF,QAAQ,IAAIR,gBAAgB,CAACC,KAAjB,CAAuBO,QAAvB,CAA7B;AACA,MAAMG,OAAO,GAAGF,QAAQ,IAAIT,gBAAgB,CAACC,KAAjB,CAAuBQ,QAAvB,CAA5B;AAEA,SAAO;AACLC,IAAAA,QAAQ,EAARA,QADK;AAELC,IAAAA,OAAO,EAAPA;AAFK,GAAP;AAID,CARD;AAUA;AACA;AACA;AACA;AACA;;;AACAX,gBAAgB,CAACM,cAAjB,GAAkC,UAACJ,WAAD,EAAiB;AACjD,MAAMU,YAAY,GAAGZ,gBAAgB,CAACa,mBAAjB,CAAqCX,WAArC,CAArB;AAEA,SAAOU,YAAY,GAAGA,YAAY,CAACP,WAAhB,GAA8B,IAAjD;AACD,CAJD;AAMA;AACA;AACA;AACA;AACA;;;AACAL,gBAAgB,CAACc,cAAjB,GAAkC,UAACZ,WAAD,EAAiB;AACjD,MAAI,CAACA,WAAD,IAAgB,CAACA,WAAW,CAACa,MAAjC,EAAyC;AACvC,WAAO,IAAP;AACD;;AAED,SAAOb,WAAW,CAACc,IAAZ,CAAiB,UAACC,KAAD;AAAA,WAAWA,KAAK,CAACC,IAAN,KAAeC,kBAA1B;AAAA,GAAjB,KAAuD,IAA9D;AACD,CAND;AAQA;AACA;AACA;AACA;AACA;;;AACAnB,gBAAgB,CAACoB,YAAjB,GAAgC,UAACC,OAAD,EAAa;AAC3C,MAAI,CAACA,OAAL,EAAc;AACZ,WAAO,IAAP;AACD;;AAED,SAAOA,OAAO,CAACC,KAAf;AACD,CAND;AAQA;AACA;AACA;AACA;AACA;;;AACAtB,gBAAgB,CAACa,mBAAjB,GAAuC,UAACX,WAAD,EAAiB;AACtD,MAAMmB,OAAO,GAAGrB,gBAAgB,CAACc,cAAjB,CAAgCZ,WAAhC,CAAhB;AAEA,SAAOF,gBAAgB,CAACoB,YAAjB,CAA8BC,OAA9B,CAAP;AACD,CAJD;AAMA;AACA;AACA;AACA;AACA;;;AACArB,gBAAgB,CAACI,YAAjB,GAAgC,UAACF,WAAD,EAAiB;AAC/C,MAAMU,YAAY,GAAGZ,gBAAgB,CAACa,mBAAjB,CAAqCX,WAArC,CAArB;;AAEA,MAAI,CAACU,YAAD,IAAiB,CAACA,YAAY,CAACW,WAAnC,EAAgD;AAC9C,WAAO,IAAP;AACD;;AAED,SAAOX,YAAY,CAACW,WAAb,CAAyBC,EAAhC;AACD,CARD;;eAUexB,gB","sourcesContent":["import {CONTENT} from '../constants';\n\nconst MediaSharesUtils = {};\n\n/**\n * parses the relevant values for mediaShares: contentId, disposition\n * @param {Object} mediaShares\n * @returns {undefined}\n */\nMediaSharesUtils.parse = (mediaShares) => {\n  if (mediaShares) {\n    return {\n      contentId: MediaSharesUtils.getContentId(mediaShares),\n      disposition: MediaSharesUtils.getDisposition(mediaShares)\n    };\n  }\n\n  return null;\n};\n\n/**\n * get the previous and current mediaShares values parsed, as well as the boolean updates\n * @param {Object} oldShare\n * @param {Object} newShare\n * @returns {Object}\n * previous: {Object} old share, current: {Object} new share,\n */\nMediaSharesUtils.getMediaShares = (oldShare, newShare) => {\n  const previous = oldShare && MediaSharesUtils.parse(oldShare);\n  const current = newShare && MediaSharesUtils.parse(newShare);\n\n  return {\n    previous,\n    current\n  };\n};\n\n/**\n * get the floor disposition (released, granted)\n * @param {Object} mediaShares\n * @returns {Boolean} disposition\n */\nMediaSharesUtils.getDisposition = (mediaShares) => {\n  const contentFloor = MediaSharesUtils.extractContentFloor(mediaShares);\n\n  return contentFloor ? contentFloor.disposition : null;\n};\n\n/**\n * extract the content property from media shares\n * @param {Object} mediaShares\n * @returns {Object}\n */\nMediaSharesUtils.extractContent = (mediaShares) => {\n  if (!mediaShares || !mediaShares.length) {\n    return null;\n  }\n\n  return mediaShares.find((share) => share.name === CONTENT) || null;\n};\n\n/**\n * extract the floor property from content object\n * @param {Object} content\n * @returns {Object}\n */\nMediaSharesUtils.extractFloor = (content) => {\n  if (!content) {\n    return null;\n  }\n\n  return content.floor;\n};\n\n/**\n * extract the content's floor from media shares\n * @param {Object} mediaShares\n * @returns {Object}\n */\nMediaSharesUtils.extractContentFloor = (mediaShares) => {\n  const content = MediaSharesUtils.extractContent(mediaShares);\n\n  return MediaSharesUtils.extractFloor(content);\n};\n\n/**\n * get who is sharing from media shares\n * @param {Object} mediaShares\n * @returns {Object}\n */\nMediaSharesUtils.getContentId = (mediaShares) => {\n  const contentFloor = MediaSharesUtils.extractContentFloor(mediaShares);\n\n  if (!contentFloor || !contentFloor.beneficiary) {\n    return null;\n  }\n\n  return contentFloor.beneficiary.id;\n};\n\nexport default MediaSharesUtils;\n"]}