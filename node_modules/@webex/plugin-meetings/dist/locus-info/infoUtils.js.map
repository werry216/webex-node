{"version":3,"sources":["infoUtils.js"],"names":["InfoUtils","parse","info","parsed","policy","parsePolicy","moderator","parseModerator","sipUri","displayHints","joined","length","forEach","key","isLocked","LOCK_STATUS_LOCKED","isUnlocked","LOCK_STATUS_UNLOCKED","getInfos","oldInfo","newInfo","previous","current","updates"],"mappings":"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","sourcesContent":["\nconst InfoUtils = {};\n\nInfoUtils.parse = (info) => {\n  const parsed = {\n    policy: InfoUtils.parsePolicy(info),\n    moderator: InfoUtils.parseModerator(info)\n  };\n\n  if (info.sipUri) {\n    parsed.sipUri = info.sipUri;\n  }\n\n  return parsed;\n};\nInfoUtils.parsePolicy = (info) => {\n  const policy = {};\n\n  // Parses the policy to show valid uses\n  if (info && info.displayHints && info.displayHints.joined && info.displayHints.joined.length > 0) {\n    // TODO: find a better way\n    info.displayHints.joined.forEach((key) => {\n      policy[key] = true;\n    });\n  }\n\n  return policy;\n};\n\nInfoUtils.parseModerator = (info) => {\n  const moderator = {};\n\n  if (info && info.displayHints && info.displayHints.moderator && info.displayHints.moderator.length > 0) {\n    info.displayHints.moderator.forEach((key) => {\n      moderator[key] = true;\n    });\n  }\n\n  return moderator;\n};\n\nInfoUtils.isLocked = (policy) => policy.LOCK_STATUS_LOCKED || false;\n\nInfoUtils.isUnlocked = (policy) => policy.LOCK_STATUS_UNLOCKED || false;\n\nInfoUtils.getInfos = (oldInfo, newInfo) => {\n  let previous = null;\n\n  if (oldInfo) {\n    previous = oldInfo;\n  }\n  const current = newInfo && InfoUtils.parse(newInfo);\n  const updates = {};\n\n  if (current) {\n    current.isLocked = InfoUtils.isLocked(current.policy);\n    current.isUnlocked = InfoUtils.isUnlocked(current.policy);\n\n    if (previous && previous.isUnlocked && current.isLocked || !previous && current.isLocked) {\n      updates.isLocked = current.isLocked;\n    }\n    if (previous && previous.isLocked && current.isUnlocked || !previous && current.isUnlocked) {\n      updates.isUnlocked = current.isUnlocked;\n    }\n  }\n\n  return {\n    previous,\n    current,\n    updates\n  };\n};\n\nexport default InfoUtils;\n"]}