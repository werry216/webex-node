{"version":3,"sources":["features-model.js"],"names":["FeaturesModel","AmpState","extend","collections","developer","FeatureCollection","entitlement","user","clear","options","attributes","forEach","key","unset","_children","_collections","reset","initialize","eventNames","eventName","FEATURE_COLLECTION_NAMES","collectionName","on","model","trigger"],"mappings":";;;;;;;;;;;;;;AACA;;AAGA;;AAEA;;AANA;AAGA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMA,aAAa,GAAGC,wBAASC,MAAT,CAAgB;AAEpC;AAEAC,EAAAA,WAAW,EAAE;AACX;AACJ;AACA;AACA;AACA;AACIC,IAAAA,SAAS,EAAEC,0BANA;;AAQX;AACJ;AACA;AACA;AACA;AACIC,IAAAA,WAAW,EAAED,0BAbF;;AAeX;AACJ;AACA;AACA;AACA;AACIE,IAAAA,IAAI,EAAEF;AApBK,GAJuB;AA2BpC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEG,EAAAA,KAnCoC,iBAmC9BC,OAnC8B,EAmCrB;AAAA;;AACb;AACA;AACA,uBAAY,KAAKC,UAAjB,EAA6BC,OAA7B,CAAqC,UAACC,GAAD,EAAS;AAC5C,MAAA,KAAI,CAACC,KAAL,CAAWD,GAAX,EAAgBH,OAAhB;AACD,KAFD,EAHa,CAOb;AACA;;AACA;;AACA,uBAAY,KAAKK,SAAjB,EAA4BH,OAA5B,CAAoC,UAACC,GAAD,EAAS;AAC3C,MAAA,KAAI,CAACA,GAAD,CAAJ,CAAUJ,KAAV;AACD,KAFD,EAVa,CAcb;;AACA;;AACA,uBAAY,KAAKO,YAAjB,EAA+BJ,OAA/B,CAAuC,UAACC,GAAD,EAAS;AAC9C,MAAA,KAAI,CAACA,GAAD,CAAJ,CAAUI,KAAV;AACD,KAFD;AAIA,WAAO,IAAP;AACD,GAxDmC;AA0DpC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEC,EAAAA,UAlEoC,wBAkEvB;AAAA;;AACX;AACA,QAAMC,UAAU,GAAG,CAAC,cAAD,EAAiB,KAAjB,EAAwB,QAAxB,CAAnB,CAFW,CAIX;;AACAA,IAAAA,UAAU,CAACP,OAAX,CAAmB,UAACQ,SAAD,EAAe;AAChCC,0CAAyBT,OAAzB,CAAiC,UAACU,cAAD,EAAoB;AACnD,QAAA,MAAI,CAACA,cAAD,CAAJ,CAAqBC,EAArB,CAAwBH,SAAxB,EAAmC,UAACI,KAAD,EAAQd,OAAR,EAAoB;AACrD,UAAA,MAAI,CAACe,OAAL,kBACYH,cADZ,GAEE,MAFF,EAGE,MAAI,CAACA,cAAD,CAHN,EAIEZ,OAJF;AAMD,SAPD;AAQD,OATD;AAUD,KAXD;AAYD;AAnFmC,CAAhB,CAAtB;;eAsFeT,a","sourcesContent":["// External dependencies.\nimport AmpState from 'ampersand-state';\n\n// Local Dependencies\nimport {FEATURE_COLLECTION_NAMES} from '../constants';\n\nimport FeatureCollection from './feature-collection';\n\n/**\n * Feature collection parent container.\n *\n * @description\n * This class contains all of the feature collection class objects to help\n * organize the data retrieved from the **wdm** service on device registration.\n */\nconst FeaturesModel = AmpState.extend({\n\n  // Ampersand property members.\n\n  collections: {\n    /**\n     * This collection contains the developer feature collection.\n     *\n     * @type {FeatureCollection}\n     */\n    developer: FeatureCollection,\n\n    /**\n     * This collection contains the entitlement feature collection.\n     *\n     * @type {FeatureCollection}\n     */\n    entitlement: FeatureCollection,\n\n    /**\n     * This collection contains the user feature collection.\n     *\n     * @type {FeatureCollection}\n     */\n    user: FeatureCollection\n  },\n\n  // Helper method members.\n\n  /**\n   * Recursively clear attributes, children, and collections.\n   *\n   * @param {Object} options - Attribute options to unset.\n   * @returns {this}\n   */\n  clear(options) {\n    // Clear the ampersand attributes safely if there are any. This class should\n    // never have any attributes.\n    Object.keys(this.attributes).forEach((key) => {\n      this.unset(key, options);\n    });\n\n    // Clear the ampersand children safely if there are any. This class should\n    // never have any children.\n    /* eslint-disable-next-line no-underscore-dangle */\n    Object.keys(this._children).forEach((key) => {\n      this[key].clear();\n    });\n\n    // Clear the ampersand collections safely.\n    /* eslint-disable-next-line no-underscore-dangle */\n    Object.keys(this._collections).forEach((key) => {\n      this[key].reset();\n    });\n\n    return this;\n  },\n\n  // Ampersand method members.\n\n  /**\n   * Initializer method for FeatureModel class object.\n   *\n   * @override\n   * @returns {void}\n   */\n  initialize() {\n    // Declare the collection event names.\n    const eventNames = ['change:value', 'add', 'remove'];\n\n    // Initialize collection event listeners.\n    eventNames.forEach((eventName) => {\n      FEATURE_COLLECTION_NAMES.forEach((collectionName) => {\n        this[collectionName].on(eventName, (model, options) => {\n          this.trigger(\n            `change:${collectionName}`,\n            this,\n            this[collectionName],\n            options\n          );\n        });\n      });\n    });\n  }\n});\n\nexport default FeaturesModel;\n"]}